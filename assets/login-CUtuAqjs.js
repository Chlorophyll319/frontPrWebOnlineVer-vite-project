import{i as k,u as _,l as V,m as f,n as g,a as i,o as d,b as s,C as N,D as S,e as u,d as C,z as m,v as D,t as p,E as U,G as j,j as B,h as T}from"./index-DOOoLRTr.js";import{b as y}from"./route-block-B_A1xBdJ.js";const z={class:"flex items-center justify-center py-6"},E={class:"w-full max-w-sm"},I={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-5"},L={class:"relative"},M={key:0,class:"text-red-500 text-xs mt-1 block"},F={class:"relative"},G=["type"],P={key:0,class:"text-red-500 text-xs mt-1 block"},R={class:"pt-2"},$=["disabled"],q={key:0,class:"pi pi-spinner pi-spin mr-2"},A={__name:"login",setup(H){const b=k(),x=_(),c=V(),o=f(!1),a=f(!1),t=g({username:"",password:""}),r=g({username:"",password:""}),v=()=>(t.username="",t.password="",r.username.trim()?r.password?!0:(t.password="請輸入密碼",!1):(t.username="請輸入使用者名稱",!1)),w=async()=>{if(v()){o.value=!0;try{const l=await T.login(r),{user:e}=l.data||{user:{}};x.login({username:e?.username||r.username,role:e?.role||"admin",token:e?.token||""}),c.add({severity:"success",summary:"登入成功",detail:"歡迎來到後台管理系統！",life:3e3}),b.push("/admin")}catch(l){console.error("Login failed:",l),c.add({severity:"error",summary:"登入失敗",detail:"請檢查帳號密碼",life:3e3})}finally{o.value=!1}}};return(l,e)=>{const h=D;return d(),i("div",z,[s("div",E,[s("div",I,[e[7]||(e[7]=N('<div class="text-center mb-5"><div class="w-12 h-12 bg-green-600 rounded-full mx-auto mb-2 flex items-center justify-center"><i class="pi pi-cog text-white text-lg"></i></div><h1 class="text-lg font-semibold text-gray-800 mb-1">後台管理系統</h1><p class="text-gray-600 text-xs">請輸入您的登入資訊</p></div>',1)),s("form",{onSubmit:S(w,["prevent"]),class:"space-y-3"},[s("div",null,[e[4]||(e[4]=s("label",{for:"username",class:"block text-sm font-medium text-gray-700 mb-1"}," 使用者名稱 ",-1)),s("div",L,[e[3]||(e[3]=s("i",{class:"pi pi-user absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-600 text-sm"},null,-1)),C(h,{id:"username",modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=n=>r.username=n),type:"text",name:"username",autocomplete:"username",placeholder:"請輸入使用者名稱",class:m(["w-full pl-9 pr-3 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-600 focus:border-green-600 hover:border-gray-400 transition-all duration-200",{"border-red-500":t.username}]),unstyled:""},null,8,["modelValue","class"])]),t.username?(d(),i("small",M,p(t.username),1)):u("",!0)]),s("div",null,[e[6]||(e[6]=s("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-1"}," 密碼 ",-1)),s("div",F,[e[5]||(e[5]=s("i",{class:"pi pi-lock absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-600 text-sm"},null,-1)),U(s("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=n=>r.password=n),type:a.value?"text":"password",name:"password",autocomplete:"current-password",placeholder:"請輸入密碼",class:m(["w-full pl-9 pr-10 py-2 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-green-600 focus:border-green-600 hover:border-gray-400 transition-all duration-200",{"border-red-500":t.password}])},null,10,G),[[j,r.password]]),s("button",{type:"button",onClick:e[2]||(e[2]=n=>a.value=!a.value),class:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-600 hover:text-gray-800 transition-all duration-200"},[s("i",{class:m([a.value?"pi pi-eye-slash":"pi pi-eye","text-sm"])},null,2)])]),t.password?(d(),i("small",P,p(t.password),1)):u("",!0)]),s("div",R,[s("button",{type:"submit",disabled:o.value,class:"w-full py-2 px-4 bg-green-600 hover:bg-green-900 disabled:bg-gray-400 disabled:cursor-not-allowed text-white text-sm font-semibold rounded shadow-sm focus:ring-2 focus:ring-green-600 focus:ring-offset-2 transition-all duration-200"},[o.value?(d(),i("i",q)):u("",!0),B(" "+p(o.value?"登入中...":"登入系統"),1)],8,$)])],32),e[8]||(e[8]=s("div",{class:"mt-4 text-center"},[s("p",{class:"text-xs text-gray-500"},"請確保您的帳號資訊安全")],-1))])])])}}};typeof y=="function"&&y(A);export{A as default};
